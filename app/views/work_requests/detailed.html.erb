<h1>All Work Requests Detailed</h1>

<%= link_to 'Simple View', "/work_requests" %><br>
<%= link_to '+ Work Request', new_work_request_path %>
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Asset ID</th>
      <th>Serial Number</th>
      <th>Manufacturer</th>
      <th>Category</th>
      <th>Location</th>
      <th>Requester</th>
      <th>Owner</th>
      <th>Date Requested</th>
      <th>Date Expire</th>
      <th>Date Completed</th>
      <th>Request type</th>
      <th>Cost</th>
      <th>Description</th>
      <th>Status</th>
      <th>Cause description</th>
      <th>Action taken</th>
      <th>Prevention taken</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @work_requests.each do |work_request| %>
      <tr>
        <td><%= work_request.id %></td>
        <td><%= link_to work_request.try(:item).try(:tagname), work_request.try(:item)  %></td>
        <td><%= work_request.try(:item).try(:serial_number) %></td>
        <td><%= work_request.try(:item).try(:model).try(:manufacturer_name) %></td>
        <td><%= work_request.try(:item).try(:model).try(:category) %></td>
        <td><%= work_request.try(:item).try(:location).try(:locationstr) %></td>
        <td><%= work_request.try(:requester).try(:name) %></td>
        <td><%= work_request.try(:owner).try(:name) %></td>
        <td><%= work_request.date_requested %></td>
        <td><%= work_request.date_expire %></td>
        <td><%= work_request.date_completed %></td>
        <td><%= work_request.request_type %></td>
        <td><%= work_request.cost %></td>
        <td><%= work_request.description %></td>
        <td><%= work_request.status %></td>
        <td><%= work_request.cause_description %></td>
        <td><%= work_request.action_taken %></td>
        <td><%= work_request.prevention_taken %></td>
        <td><%= link_to 'Show', work_request %></td>
        <td><%= link_to 'Edit', edit_work_request_path(work_request) %></td>
        <td><%= link_to 'Destroy', work_request, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

