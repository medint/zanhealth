<div id="object-form_top">
  <%= form_for(@bmet_work_order) do |f| %>
    <% if @bmet_work_order.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@bmet_work_order.errors.count, "error") %> prohibited this bmet_work_order from being saved:</h2>
            <ul> 
              <% @bmet_work_order.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
              <% end %>
            </ul>
        </div>x
    <% end %>

    <div id="action-bar">
      <div id="field-box_item-id">      
        <div class="item-id"><%= @language['Work Order'] %> # <%= @bmet_work_order.id %></div>
      </div>    
      <div class="action-bar_box" id="work_order_status">
        <%= f.select :status, @status %>
      </div>
      <% if @bmet_work_order.destroyed? %>
        <%= link_to '', hide_bmet_work_order_path(@bmet_work_order), title:"Unhide work order", rel:"tooltip", method: :put, :id => "archive-button_right"%>
      <% else %>
        <%= link_to '', hide_bmet_work_order_path(@bmet_work_order), title:"Hide work order", rel:"tooltip", method: :put, :id => "archive-button_right"%>
      <% end %>
      
      <%= link_to "", '#', onclick: "printdetailpage(); return false;", :id => "print-button_right", :required => true%>
      
      <div class="action_submit">
        <%= f.submit @language['Save Changes']%>
      </div>
    </div>

    <div id="work_order_dates">
      <div class="field-box">
          <div class="field-type"><%= @language['Date Created'] %></div>
          <div class="field-info"><%= @bmet_work_order.created_at.try(:strftime,"%^b %d, %Y") %></div>
        </div>
        <div class="field-box">
          <div class="field-type"><%= @language['Date Started'] %></div>
          <div class="field-info">
              <%= @bmet_work_order.date_started.try(:strftime,"%^b %d, %Y") %>
              <%#=  @bmet_work_order.date_started.try(:strftime,"%^b %d, %Y") %>
          </div>
        </div>
        <div class="field-box" id="expected-date-box">
          <div class="field-type"><%= @language['Expected Date of Completion'] %></div>
          <div class="field-info"><%= f.date_select :date_expire, use_short_month: true %></div>
        </div>
        <div class="field-box">
          <div class="field-type"><%= @language['Date Completed'] %></div>
          <div class="field-info"><%= @bmet_work_order.date_completed.try(:strftime,"%^b %d, %Y") %></div>
        </div>
    </div>
    <!-- can put inside the url parameter but shouldn't be able to imposter as another user -->
    <div id="properties-box">
      <table id="properties-table">
        <tr>
          <td><%= @language['Requester'] %></td>
          <td><%= @bmet_work_order.requester.try(:name) %></td>
        </tr>
        <tr>
          <td><%= @language['Owner'] %></td>
          <td><%= f.collection_select :owner_id, @users, :id, :name, :id => "owner", :required => true %></td>
        </tr>
        <tr>
          <td><%= @language['Department'] %></td>
          <td><%= f.collection_select :department_id, @departments, :id, :name, :required => true %></td>
        </tr>
        <tr>
          <td><%= @language['Description'] %></td>
          <td><%= f.text_area :description, :required => true %></td>
        </tr>
        <tr>
            <td><%= @language['Cause Description'] %></td>
            <td><%= f.text_area :cause_description %></td>
        </tr>
        <tr>
            <td><%= @language['Action Taken'] %></td>
            <td><%= f.text_area :action_taken %></td>
        </tr>

        <tr>   
            <td><%= @language['Prevention Taken'] %></td>
            <td><%= f.text_area :prevention_taken %></td>
        </tr>        
        <% if @bmet_work_order.wr_origin %>
          <tr>
            <td>Original Work Request</td>
            <td>
            <a style="color:white" href="<%= bmet_work_requests_url + '/all/' + @bmet_work_order.wr_origin_id.to_s %>">
              Work Order <%= @bmet_work_order.wr_origin_id %>
            </a>
            </td>
          </tr>
        <% elsif @bmet_work_order.pm_origin %>
          <tr>
            <td>Origin Preventative Maintenance</td>
            <td>
            <a style="color:white" href="<%= bmet_preventative_maintenances_url + '/all/' + @bmet_work_order.pm_origin_id.to_s %>">
              Preventative Maintenance <%= @bmet_work_order.pm_origin_id %>
            </a>
            </td>
          </tr>
        <% else %>
        <% end %>
        </tr>
      </table>     
    </div>

    



    <div id="object-form-left">
      <div class="item-info">    
      	<div class="field-box">
          <div class="field-type"><%= @language['Requester'] %></div>
          <div class="field-info"><div id="requester"><%= @bmet_work_order.requester.try(:name) %></div></div>
        </div>
        <div class="field-box">
          <div class="field-type"><%= @language['Owner'] %></div>
          <div class="field-info"><%= f.collection_select :owner_id, @users, :id, :name, :id => "owner", :required => true %></div>
        </div>
        <div class="field-box">
          <div class="field-type"><%= @language['Department'] %></div>
          <div class="field-info"><%= f.collection_select :department_id, @departments, :id, :name, :required => true %></div>
        </div>
      </div>
    </div>

    <div id="object-form-right">
        <div id="field-box_item-id">
          <div class="item-id">
          <%= @language['Work Order'] %> # <%= @bmet_work_order.id %>
          </div>
        </div>

        <div id="object-status-field">
          <%= f.select( :status, @status) %>
    		  <% if @bmet_work_order.destroyed? %>
    		    <%= link_to '', hide_bmet_work_order_path(@bmet_work_order), title:"Unhide work order", rel:"tooltip", method: :put, :id => "archive-button_right"%>
    	    <% else %>
    		    <%= link_to '', hide_bmet_work_order_path(@bmet_work_order), title:"Hide work order", rel:"tooltip", method: :put, :id => "archive-button_right"%>
    	    <% end %>
	        <%= link_to "", '#', onclick: "printdetailpage(); return false;", :id => "print-button_right", :required => true%>
        </div>

        <div class="action_submit">
            <%= f.submit @language['Save Changes'] %>
        </div>
    </div>

    <div id="object-form-bottom">
      <div class="field-box-date">
          <div class="field-type"><%= @language['Date Created'] %></div>
          <div class="field-info"><%= @bmet_work_order.created_at.try(:strftime,"%^b %d, %Y") %></div>
        </div>
        <div class="field-box-date">
          <div class="field-type"><%= @language['Date Started'] %></div>
          <div class="field-info">
              <%= @bmet_work_order.date_started.try(:strftime,"%^b %d, %Y") %>
              <%#=  @bmet_work_order.date_started.try(:strftime,"%^b %d, %Y") %>
          </div>
        </div>
        <div class="field-box-date">
          <div class="field-type"><%= @language['Expected Date of Completion'] %></div>
          <div class="field-info"><%= f.date_select :date_expire, use_short_month: true %></div>
        </div>
        <div class="field-box-date">
          <div class="field-type"><%= @language['Date Completed'] %></div>
          <div class="field-info"><%= @bmet_work_order.date_completed.try(:strftime,"%^b %d, %Y") %></div>
        </div>
        <div class="field-box-description">   
            <div class="field-type"><%= @language['Description'] %></div>
            <div class="field-info"><%= f.text_area :description, :required => true %></div>
        </div>

    </div>
  <%end%>

</div>
